(()=>{var e={};e.id=799,e.ids=[799],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},21486:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(70260),o=s(28203),a=s(25155),i=s.n(a),n=s(67292),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["pages",{children:["SellerDashboard",{children:["[userid]",{children:["ViewBook",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,79977)),"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/pages/SellerDashboard/[userid]/ViewBook/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,36566)),"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/pages/SellerDashboard/layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/pages/SellerDashboard/[userid]/ViewBook/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/pages/SellerDashboard/[userid]/ViewBook/page",pathname:"/pages/SellerDashboard/[userid]/ViewBook",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},96543:(e,t,s)=>{Promise.resolve().then(s.bind(s,1638))},33495:(e,t,s)=>{Promise.resolve().then(s.bind(s,34978))},93410:(e,t,s)=>{Promise.resolve().then(s.bind(s,79977))},11562:(e,t,s)=>{Promise.resolve().then(s.bind(s,18246))},33339:(e,t,s)=>{Promise.resolve().then(s.bind(s,36566))},86483:(e,t,s)=>{Promise.resolve().then(s.bind(s,37218))},76885:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,13219,23)),Promise.resolve().then(s.t.bind(s,34863,23)),Promise.resolve().then(s.t.bind(s,25155,23)),Promise.resolve().then(s.t.bind(s,40802,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,48530,23)),Promise.resolve().then(s.t.bind(s,88921,23))},18741:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,66959,23)),Promise.resolve().then(s.t.bind(s,33875,23)),Promise.resolve().then(s.t.bind(s,88903,23)),Promise.resolve().then(s.t.bind(s,57174,23)),Promise.resolve().then(s.t.bind(s,84178,23)),Promise.resolve().then(s.t.bind(s,87190,23)),Promise.resolve().then(s.t.bind(s,61365,23))},43560:(e,t,s)=>{"use strict";s.d(t,{Ve:()=>r,zi:()=>o}),s(45512),s(63250);let r="https://api.cloudinary.com/v1_1/dipztwslj/upload",o="bookimages"},25037:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(45512);s(58009),s(55898);let o=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"loading-overlay",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Loading..."})]})})},34978:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>l});var r=s(45512),o=s(58009),a=s(70944),i=s(40560);let n=(0,o.createContext)(void 0),l=({children:e})=>{let[t,s]=(0,o.useState)(null),[l,d]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=(0,i.hg)(a.j2,e=>{s(e),d(!1)});return()=>e()},[]),(0,r.jsx)(n.Provider,{value:{user:t,loading:l},children:e})},d=()=>{let e=(0,o.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},70944:(e,t,s)=>{"use strict";s.d(t,{db:()=>l,j2:()=>n});var r=s(46722),o=s(17656),a=s(40560);let i=(0,r.Wp)({apiKey:"AIzaSyBJ_h8hsYSrF6n_aUHNcSM9Sxarjy9vdis",authDomain:"homelibrary-3eb02.firebaseapp.com",projectId:"homelibrary-3eb02",storageBucket:"homelibrary-3eb02.appspot.com",messagingSenderId:"193740511363",appId:"1:193740511363:web:1aa41e575c0e79ae3be3b6"}),n=(0,a.xI)(i),l=(0,o.aU)(i)},18246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(45512),o=s(58009);s(17479),s(36795);var a=s(17656),i=s(70944),n=s(43560);let l=e=>{let[t,s]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),[c,u]=(0,o.useState)([]),[p,h]=(0,o.useState)({book:e.bookname,publisher:e.authorname,price:e.bookprice,condition:e.bookdes,tags:[e.tag1,e.tag2,e.tag3,e.tag4,e.tag5],location:"",description:"",pagescount:"",binding:"",category:"",isbnnumber:"",publishedate:""}),m=(0,o.useRef)(null),[b,g]=(0,o.useState)(e.bookname),x=(e,t)=>{let{name:s,value:r}=e.target;if("tags"===s&&"number"==typeof t){let e=[...p.tags];e[t]=r,h({...p,tags:e})}else h({...p,[s]:r})},v=async()=>{if(window.confirm("Are you sure you want to delete this book? This action cannot be undone."))try{let t=(0,a.H9)(i.db,"books",e.id);await (0,a.kd)(t),alert("Book deleted successfully.")}catch(e){console.error("Error deleting book:",e),alert("Failed to delete book.")}},j=async()=>{if(window.confirm("Are you sure you want to mark this book as SOLD?"))try{let t=(0,a.H9)(i.db,"books",e.id);await (0,a.mZ)(t,{moderationStatus:"sold"}),alert("Book marked as SOLD.")}catch(e){console.error("Error updating status:",e),alert("Failed to update status.")}},f=async e=>{let t=new FormData;t.append("file",e),t.append("upload_preset",n.zi);let s=await fetch(n.Ve,{method:"POST",body:t});return(await s.json()).secure_url},y=async()=>{d(!0);try{let t=[];if(c.length>0){let e=c.map(e=>f(e));t=await Promise.all(e)}let r=(0,a.H9)(i.db,"books",e.id);await (0,a.mZ)(r,{...p,uploadedImages:t.length>0?t:void 0}),alert("Book updated successfully!"),s(!1)}catch(e){console.error("Error updating book:",e),alert("Update failed")}finally{d(!1)}};return(0,o.useEffect)(()=>{let t=m.current;if(!t)return;let s=()=>{let s=e.bookname;for(t.textContent=s;t.scrollWidth>t.clientWidth&&s.length>0;)s=s.slice(0,-1),t.textContent=s+"...";g(t.textContent||e.bookname)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[e.bookname]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"viewbookcontainer",children:[(0,r.jsx)("div",{className:"imagecontainer",children:(0,r.jsx)("img",{src:e.productimage})}),(0,r.jsxs)("div",{className:"textcontainer",children:[(0,r.jsxs)("p",{className:"bookname",children:[e.bookname.split(" ").slice(0,3).join(" "),e.bookname.split(" ").length>4&&"..."]}),(0,r.jsxs)("p",{className:"authorname",children:["by ",e.authorname]}),(0,r.jsxs)("p",{className:"bookprice",children:["Price: Rs.",e.bookprice]}),(0,r.jsx)("p",{className:"bookdes",children:e.bookdes}),(0,r.jsxs)("p",{className:"tags",children:["Tag:",[e.tag1,e.tag2,e.tag3,e.tag4,e.tag5].map((e,t)=>e&&(0,r.jsx)("p",{className:"taggs",children:e},t))]})]}),(0,r.jsxs)("div",{className:"viewbuttons",children:[(0,r.jsx)("button",{onClick:()=>s(!0),children:"EDIT BOOK"}),(0,r.jsx)("button",{onClick:j,children:"MARK AS SOLD"}),(0,r.jsx)("button",{className:"delbutton",onClick:v,children:"DELETE BOOK"})]})]}),t&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal",children:[(0,r.jsx)("h2",{children:"Edit Book"}),(0,r.jsx)("input",{name:"book",value:p.book,onChange:x,placeholder:"Book Name"}),(0,r.jsx)("input",{name:"publisher",value:p.publisher,onChange:x,placeholder:"Author"}),(0,r.jsx)("input",{name:"price",value:p.price,onChange:x,placeholder:"Price"}),(0,r.jsx)("textarea",{name:"condition",value:p.condition,onChange:x,placeholder:"Condition"}),(0,r.jsx)("textarea",{name:"description",value:p.description,onChange:x,placeholder:"Description"}),(0,r.jsx)("input",{name:"location",value:p.location,onChange:x,placeholder:"Location"}),(0,r.jsx)("input",{name:"pagescount",value:p.pagescount,onChange:x,placeholder:"Pages"}),(0,r.jsx)("input",{name:"binding",value:p.binding,onChange:x,placeholder:"Binding Type"}),(0,r.jsx)("input",{name:"category",value:p.category,onChange:x,placeholder:"Category"}),(0,r.jsx)("input",{name:"isbnnumber",value:p.isbnnumber,onChange:x,placeholder:"ISBN"}),(0,r.jsx)("input",{name:"publishedate",value:p.publishedate,onChange:x,placeholder:"Publish Date"}),p.tags.map((e,t)=>(0,r.jsx)("input",{name:"tags",value:e,onChange:e=>x(e,t),placeholder:`Tag ${t+1}`},t)),(0,r.jsx)("label",{children:"Upload up to 7 images:"}),(0,r.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{e.target.files&&u(Array.from(e.target.files).slice(0,7))}}),(0,r.jsxs)("div",{className:"modal-buttons",children:[(0,r.jsx)("button",{onClick:y,disabled:l,children:l?"Updating...":"Save Changes"}),(0,r.jsx)("button",{onClick:()=>s(!1),children:"Cancel"})]})]})})]})};var d=s(40560);let c=()=>{let[e,t]=(0,o.useState)([]),[s,n]=(0,o.useState)(!0),[c,u]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=(0,d.hg)(i.j2,e=>{e?(u(e.uid),p(e.uid)):(u(null),t([]))});return()=>e()},[]);let p=async e=>{try{let s=(0,a.rJ)(i.db,"books"),r=(0,a.P)(s,(0,a._M)("uid","==",e)),o=(await (0,a.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));t(o)}catch(e){console.error("Error fetching user books:",e)}finally{n(!1)}};return(0,r.jsx)("div",{className:"belowdash",children:(0,r.jsx)("div",{className:"tempconta",children:s?(0,r.jsx)("p",{children:"Loading books..."}):e.length>0?e.map(e=>(0,r.jsx)(l,{id:e.id,productimage:e.uploadedImages?.[0]||"/product.png",bookname:e.book,authorname:e.publisher,bookprice:e.price,bookdes:e.condition,tag1:e.tags?.[0]||"",tag2:e.tags?.[1]||"",tag3:e.tags?.[2]||"",tag4:e.tags?.[3]||"",tag5:e.tags?.[4]||""},e.id)):(0,r.jsx)("p",{children:"No books found."})})})}},37218:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(45512),o=s(58009);s(12927);var a=s(70944),i=s(17656),n=s(40560);let l=()=>{let[e,t]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=(0,n.hg)(a.j2,async e=>{if(e){let s=(0,i.H9)(a.db,"users",e.uid),r=await (0,i.x7)(s);r.exists()&&t(r.data())}});return()=>e()},[]),(0,r.jsxs)("div",{className:"topmenucontainer",children:[(0,r.jsx)("img",{src:"/logo.png",className:"logotop",alt:"logo"}),(0,r.jsxs)("div",{className:"namecontainer",children:[(0,r.jsx)("div",{className:"profilePicture",children:(0,r.jsx)("img",{src:e?.profilepicture||"/pp.jpg",alt:"profile"})}),(0,r.jsxs)("div",{className:"topmenunames",children:[(0,r.jsx)("h1",{children:e?`${e.fname} ${e.lname}`:"Loading..."}),(0,r.jsx)("p",{children:e?.Status||""})]})]})]})};var d=s(34978);s(19333);var c=s(25037),u=s(79334);let p=()=>{let{user:e}=(0,d.A)(),[t,s]=(0,o.useState)(!1),i=(0,u.useRouter)();if(!e)return null;let l=e=>{s(!0),setTimeout(()=>{i.push(e),s(!1)},3e3)},p=async()=>{s(!0);try{await (0,n.CI)(a.j2),setTimeout(()=>{window.location.href="/",s(!1)},3e3)}catch(e){s(!1),console.error("Logout failed:",e),alert("Failed to log out. Please try again.")}};return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(c.A,{})," ",(0,r.jsxs)("div",{className:"sidemenucontainer",children:[(0,r.jsxs)("button",{onClick:()=>l(`/pages/SellerDashboard/${e.uid}/dashboard`),children:[(0,r.jsx)("img",{src:"/dashhome.svg",alt:"Dashboard Icon"})," Dashboard"]}),(0,r.jsxs)("button",{onClick:()=>l(`/pages/SellerDashboard/${e.uid}/AddBook`),children:[(0,r.jsx)("img",{src:"/dashadd.svg",alt:"Add Book Icon"})," Add Book"]}),(0,r.jsxs)("button",{onClick:()=>l(`/pages/SellerDashboard/${e.uid}/ViewBook`),children:[(0,r.jsx)("img",{src:"/dashview.svg",alt:"View Books Icon"})," View Books"]}),(0,r.jsxs)("button",{onClick:()=>l(`/pages/SellerDashboard/${e.uid}/Message`),children:[(0,r.jsx)("img",{src:"/dashmessages.svg",alt:"Messages Icon"})," Messages"]}),(0,r.jsxs)("button",{onClick:()=>l(`/pages/SellerDashboard/${e.uid}/Settings`),children:[(0,r.jsx)("img",{src:"/dashbuy.svg",alt:"Settings"})," Settings"]}),(0,r.jsxs)("button",{onClick:()=>l("/"),children:[(0,r.jsx)("img",{src:"/dashbuy.svg",alt:"Buy a Book Icon"})," Buy A Book"]}),(0,r.jsxs)("button",{onClick:p,children:[(0,r.jsx)("img",{src:"/dashout.svg",alt:"Logout Icon"})," Log Out"]})]})]})};function h({children:e}){return(0,r.jsxs)("div",{className:"dashboard",children:[(0,r.jsx)(l,{}),(0,r.jsxs)("div",{className:"belowdash",children:[(0,r.jsx)(p,{}),e]})]})}s(62328)},1638:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>o});var r=s(46760);let o=(0,r.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/context/authContext.tsx","AuthProvider");(0,r.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/context/authContext.tsx","useAuth")},19611:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>d});var r=s(62740),o=s(56389),a=s.n(o),i=s(51189),n=s.n(i);s(82704);var l=s(1638);let d={title:"Create Next App",description:"Generated by create next app"};function c({children:e}){return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:`${a().variable} ${n().variable}`,children:(0,r.jsx)(l.AuthProvider,{children:e})})})}},79977:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/pages/SellerDashboard/[userid]/ViewBook/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/pages/SellerDashboard/[userid]/ViewBook/page.tsx","default")},36566:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/pages/SellerDashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/admin/Desktop/Olya/Projects/MyHomeLibrary/app/pages/SellerDashboard/layout.tsx","default")},46055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(88077);let o=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},55898:()=>{},82704:()=>{},17479:()=>{},19333:()=>{},12927:()=>{},36795:()=>{},62328:()=>{}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,442,77,673,250],()=>s(21486));module.exports=r})();