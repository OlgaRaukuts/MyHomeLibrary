(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5076],{3443:(e,s,a)=>{Promise.resolve().then(a.bind(a,734))},929:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var t=a(5155);a(2115),a(4892);let l=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"loading-overlay",children:[(0,t.jsx)("div",{className:"loading-spinner"}),(0,t.jsx)("p",{children:"Loading..."})]})})},4194:(e,s,a)=>{"use strict";a.d(s,{db:()=>i,j2:()=>o});var t=a(9904),l=a(7058),n=a(4565);let r=(0,t.Wp)({apiKey:"AIzaSyBJ_h8hsYSrF6n_aUHNcSM9Sxarjy9vdis",authDomain:"homelibrary-3eb02.firebaseapp.com",projectId:"homelibrary-3eb02",storageBucket:"homelibrary-3eb02.firebasestorage.app",messagingSenderId:"193740511363",appId:"1:193740511363:web:1aa41e575c0e79ae3be3b6"}),o=(0,n.xI)(r),i=(0,l.aU)(r)},734:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),l=a(2115);a(8041);var n=a(3189),r=a(151),o=a(8199),i=a(4194),c=a(7058);let d=()=>{let[e,s]=(0,l.useState)([]),[a,d]=(0,l.useState)({});return(0,l.useEffect)(()=>{(async()=>{try{console.log("Fetching book listings...");let e=(0,c.rJ)(i.db,"books"),a=(0,c.P)(e,(0,c.My)("createdAt","desc")),t=(await (0,c.GG)(a)).docs.map(e=>{var s,a;return{id:e.id,title:e.data().book,author:e.data().author,price:"Rs.".concat(e.data().price,".00"),sellerUid:e.data().uid||"unknown",bid:e.data().bid,createdAt:(null===(s=e.data().createdAt)||void 0===s?void 0:s.toDate())||new Date,imageUrl:(null===(a=e.data().uploadedImages)||void 0===a?void 0:a[0])||"/placeholder.png"}});s(t),console.log("Fetched books:",t);let l=[...new Set(t.map(e=>e.sellerUid).filter(e=>"unknown"!==e))];if(console.log("Unique UIDs found:",l),0===l.length)return;let n={};await Promise.all(l.map(async e=>{try{console.log("Fetching seller for UID: ".concat(e));let s=(0,c.H9)(i.db,"users",e),a=await (0,c.x7)(s);if(a.exists()){let s=a.data();n[e]="".concat(s.fname," ").concat(s.lname),console.log("Seller found: ".concat(n[e]))}else console.warn("No user found for UID: ".concat(e)),n[e]="Unknown Seller"}catch(s){console.error("Error fetching user ".concat(e,":"),s),n[e]="Unknown Seller"}})),d(n),console.log("Final Seller Names Updated:",n)}catch(e){console.error("Error fetching books:",e)}})()},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.A,{}),(0,t.jsxs)("div",{className:"maincontainer",children:[(0,t.jsx)(r.A,{}),(0,t.jsx)("div",{className:"tempcontainer",children:e.length>0?e.map(e=>(0,t.jsx)(o.A,{imageUrl:e.imageUrl,title:e.title,author:e.author,price:e.price,sellerName:a[e.sellerUid]||"Loading...",sellerUid:e.sellerUid,bid:e.bid,onApprove:()=>console.log("".concat(e.title," Approved!")),onReject:()=>console.log("".concat(e.title," Rejected!"))},e.id)):(0,t.jsx)("p",{children:"No books available."})})]})]})}},8199:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var t=a(5155);a(2115),a(2116);let l=e=>{let{imageUrl:s,title:a,author:l,price:n,sellerName:r,onApprove:o,onReject:i,sellerUid:c,bid:d}=e;return(0,t.jsxs)("div",{className:"allcontainer",children:[(0,t.jsx)("img",{src:s,alt:a}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:a}),(0,t.jsxs)("h3",{children:["Author: ",l]}),(0,t.jsx)("p",{children:n}),(0,t.jsxs)("button",{className:"sellerbutton",onClick:()=>window.open("/pages/seller/".concat(c,"/SellerPage"),"_blank"),children:["Seller: ",r]}),(0,t.jsx)("br",{}),(0,t.jsx)("button",{className:"checkbutton",onClick:()=>window.open("/pages/".concat(d,"/ProductPage"),"_self"),children:"Check Listing"})]}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsxs)("div",{className:"approvebuttons",children:[(0,t.jsx)("button",{className:"right",onClick:o,children:"✓"}),(0,t.jsx)("button",{className:"wrong",onClick:i,children:"✘"})]})})]})}},151:(e,s,a)=>{"use strict";a.d(s,{A:()=>o});var t=a(5155),l=a(2115);a(752);var n=a(929),r=a(6046);let o=()=>{let[e,s]=(0,l.useState)(!1),a=(0,r.useRouter)(),[o,i]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=sessionStorage.getItem("adminid");e?i(e):a.push("/LoginPages/adminlogin")},[]);let c=e=>{o&&(s(!0),setTimeout(()=>{a.push("/pages/Moderation/".concat(o,"/").concat(e)),s(!1)},1500))};return(0,t.jsxs)(t.Fragment,{children:[e&&(0,t.jsx)(n.A,{}),(0,t.jsxs)("div",{className:"sidemenucontainer",children:[(0,t.jsxs)("button",{onClick:()=>c("NewListings"),children:[(0,t.jsx)("img",{src:"/dashhome.svg",alt:"Dashboard Icon"})," New Listings"]}),(0,t.jsxs)("button",{onClick:()=>c("AllListings"),children:[(0,t.jsx)("img",{src:"/dashadd.svg",alt:"Add Book Icon"})," All Listings"]}),(0,t.jsxs)("button",{onClick:()=>c("AllUsers"),children:[(0,t.jsx)("img",{src:"/dashview.svg",alt:"View Books Icon"})," View Users"]}),(0,t.jsxs)("button",{onClick:()=>c("AddModerator"),children:[(0,t.jsx)("img",{src:"/dashbuy.svg",alt:"Settings"})," Add Moderator"]}),(0,t.jsxs)("button",{onClick:()=>{sessionStorage.removeItem("adminid"),a.push("/pages/LoginPages/adminlogin")},children:[(0,t.jsx)("img",{src:"/dashout.svg",alt:"Logout Icon"})," Log Out"]})]})]})}},3189:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var t=a(5155),l=a(2115);a(662);var n=a(4194),r=a(7058),o=a(4565);let i=()=>{let[e,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=(0,o.hg)(n.j2,async e=>{if(e&&e.email){let a=(0,r.rJ)(n.db,"admins"),t=(0,r.P)(a,(0,r._M)("email","==",e.email)),l=await (0,r.GG)(t);l.empty||s(l.docs[0].data())}});return()=>e()},[]),(0,t.jsxs)("div",{className:"topmenucontainer",children:[(0,t.jsx)("img",{src:"/logo.png",className:"logotop",alt:"logo"}),(0,t.jsxs)("div",{className:"namecontainer",children:[(0,t.jsx)("div",{className:"profilePicture",children:(0,t.jsx)("img",{src:"/pp.jpg",alt:"profile"})}),(0,t.jsxs)("div",{className:"topmenunames",children:[(0,t.jsx)("h1",{children:(null==e?void 0:e.fullname)||"Loading..."}),(0,t.jsx)("p",{children:(null==e?void 0:e.role)||""})]})]})]})}},6046:(e,s,a)=>{"use strict";var t=a(6658);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},4892:()=>{},8041:()=>{},2116:()=>{},752:()=>{},662:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[9024,5951,4725,2029,9895,2992,7512,4778,8441,1517,7358],()=>s(3443)),_N_E=e.O()}]);