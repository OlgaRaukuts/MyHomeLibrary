(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5640],{6937:(e,r,a)=>{Promise.resolve().then(a.bind(a,7034))},929:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});var s=a(5155);a(2115),a(4892);let t=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"loading-overlay",children:[(0,s.jsx)("div",{className:"loading-spinner"}),(0,s.jsx)("p",{children:"Loading..."})]})})},4194:(e,r,a)=>{"use strict";a.d(r,{db:()=>l,j2:()=>i});var s=a(9904),t=a(7058),n=a(4565);let o=(0,s.Wp)({apiKey:"AIzaSyBJ_h8hsYSrF6n_aUHNcSM9Sxarjy9vdis",authDomain:"homelibrary-3eb02.firebaseapp.com",projectId:"homelibrary-3eb02",storageBucket:"homelibrary-3eb02.firebasestorage.app",messagingSenderId:"193740511363",appId:"1:193740511363:web:1aa41e575c0e79ae3be3b6"}),i=(0,n.xI)(o),l=(0,t.aU)(o)},7034:(e,r,a)=>{"use strict";let s;a.r(r),a.d(r,{default:()=>p});var t=a(5155),n=a(2115);a(7300);var o=a(3189),i=a(151),l=a(4194),d=a(7058),c=a(4565);let m={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},u=new Uint8Array(16),h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).slice(1));let g=function(e,r,a){if(m.randomUUID&&!r&&!e)return m.randomUUID();let t=(e=e||{}).random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(u)}();if(t.length<16)throw Error("Random bytes length must be >= 16");if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,r){if((a=a||0)<0||a+16>r.length)throw RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[a+e]=t[e];return r}return function(e,r=0){return(h[e[r+0]]+h[e[r+1]]+h[e[r+2]]+h[e[r+3]]+"-"+h[e[r+4]]+h[e[r+5]]+"-"+h[e[r+6]]+h[e[r+7]]+"-"+h[e[r+8]]+h[e[r+9]]+"-"+h[e[r+10]]+h[e[r+11]]+h[e[r+12]]+h[e[r+13]]+h[e[r+14]]+h[e[r+15]]).toLowerCase()}(t)},p=()=>{let[e,r]=(0,n.useState)({name:"",email:"",role:"Moderator",phone:"",password:""}),[a,s]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=(0,d.aQ)((0,d.rJ)(l.db,"admins"),e=>{s(e.docs.map(e=>({name:e.data().fullname,email:e.data().adminid,role:e.data().role,phone:e.data().pnum})))});return()=>e()},[]);let m=a=>{r({...e,[a.target.name]:a.target.value})},u=async r=>{if(r.preventDefault(),!e.name||!e.email||!e.phone||!e.password){alert("Please fill all fields.");return}try{if(console.log("Checking if email exists..."),(await (0,c.Wm)(l.j2,e.email)).length>0){alert("This email is already in use. Please use another email.");return}console.log("Registering user...");let r=await (0,c.eJ)(l.j2,e.email,e.password);console.log("User registered:",r);let a=g();console.log("Generated admin ID:",a),await (0,d.gS)((0,d.rJ)(l.db,"admins"),{adminid:a,fullname:e.name,email:e.email,pnum:e.phone,role:e.role}),alert("Moderator added successfully!")}catch(e){console.error("Error adding moderator:",e),alert(e)}},h=async e=>{try{let r=(await (0,d.GG)((0,d.rJ)(l.db,"admins"))).docs.find(r=>r.data().adminid===e);r&&(await (0,d.kd)((0,d.H9)(l.db,"admins",r.id)),alert("Moderator removed successfully!"))}catch(e){console.error("Error removing moderator:",e),alert("Error removing moderator.")}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{}),(0,t.jsxs)("div",{className:"maincontainer",children:[(0,t.jsx)(i.A,{}),(0,t.jsxs)("div",{className:"tempcontainer",children:[(0,t.jsx)("h2",{children:"Add New Moderator"}),(0,t.jsxs)("form",{onSubmit:u,className:"moderator-form",children:[(0,t.jsxs)("label",{children:["Full Name:",(0,t.jsx)("input",{type:"text",name:"name",value:e.name,onChange:m,required:!0})]}),(0,t.jsxs)("label",{children:["Email:",(0,t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:m,required:!0})]}),(0,t.jsxs)("label",{children:["Phone Number:",(0,t.jsx)("input",{type:"tel",name:"phone",value:e.phone,onChange:m,required:!0})]}),(0,t.jsxs)("label",{children:["Role:",(0,t.jsxs)("select",{name:"role",value:e.role,onChange:m,children:[(0,t.jsx)("option",{value:"Moderator",children:"Moderator"}),(0,t.jsx)("option",{value:"Admin",children:"Admin"})]})]}),(0,t.jsxs)("label",{children:["Password:",(0,t.jsx)("input",{type:"password",name:"password",value:e.password,onChange:m,required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"submit-btn",children:"Add Moderator"})]}),(0,t.jsxs)("div",{className:"moderators-container",children:[(0,t.jsx)("h2",{children:"Current Moderators"}),(0,t.jsxs)("table",{className:"moderators-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Role"}),(0,t.jsx)("th",{children:"Phone"}),(0,t.jsx)("th",{children:"Action"})]})}),(0,t.jsx)("tbody",{children:a.map((e,r)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:e.email}),(0,t.jsx)("td",{children:e.role}),(0,t.jsx)("td",{children:e.phone}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{className:"remove-btn",onClick:()=>h(e.email),children:"Remove"})})]},r))})]})]})]})]})]})}},151:(e,r,a)=>{"use strict";a.d(r,{A:()=>i});var s=a(5155),t=a(2115);a(752);var n=a(929),o=a(6046);let i=()=>{let[e,r]=(0,t.useState)(!1),a=(0,o.useRouter)(),[i,l]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=sessionStorage.getItem("adminid");e?l(e):a.push("/LoginPages/adminlogin")},[]);let d=e=>{i&&(r(!0),setTimeout(()=>{a.push("/pages/Moderation/".concat(i,"/").concat(e)),r(!1)},1500))};return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)(n.A,{}),(0,s.jsxs)("div",{className:"sidemenucontainer",children:[(0,s.jsxs)("button",{onClick:()=>d("NewListings"),children:[(0,s.jsx)("img",{src:"/dashhome.svg",alt:"Dashboard Icon"})," New Listings"]}),(0,s.jsxs)("button",{onClick:()=>d("AllListings"),children:[(0,s.jsx)("img",{src:"/dashadd.svg",alt:"Add Book Icon"})," All Listings"]}),(0,s.jsxs)("button",{onClick:()=>d("AllUsers"),children:[(0,s.jsx)("img",{src:"/dashview.svg",alt:"View Books Icon"})," View Users"]}),(0,s.jsxs)("button",{onClick:()=>d("AddModerator"),children:[(0,s.jsx)("img",{src:"/dashbuy.svg",alt:"Settings"})," Add Moderator"]}),(0,s.jsxs)("button",{onClick:()=>{sessionStorage.removeItem("adminid"),a.push("/pages/LoginPages/adminlogin")},children:[(0,s.jsx)("img",{src:"/dashout.svg",alt:"Logout Icon"})," Log Out"]})]})]})}},3189:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var s=a(5155),t=a(2115);a(662);var n=a(4194),o=a(7058),i=a(4565);let l=()=>{let[e,r]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let e=(0,i.hg)(n.j2,async e=>{if(e&&e.email){let a=(0,o.rJ)(n.db,"admins"),s=(0,o.P)(a,(0,o._M)("email","==",e.email)),t=await (0,o.GG)(s);t.empty||r(t.docs[0].data())}});return()=>e()},[]),(0,s.jsxs)("div",{className:"topmenucontainer",children:[(0,s.jsx)("img",{src:"/logo.png",className:"logotop",alt:"logo"}),(0,s.jsxs)("div",{className:"namecontainer",children:[(0,s.jsx)("div",{className:"profilePicture",children:(0,s.jsx)("img",{src:"/pp.jpg",alt:"profile"})}),(0,s.jsxs)("div",{className:"topmenunames",children:[(0,s.jsx)("h1",{children:(null==e?void 0:e.fullname)||"Loading..."}),(0,s.jsx)("p",{children:(null==e?void 0:e.role)||""})]})]})]})}},6046:(e,r,a)=>{"use strict";var s=a(6658);a.o(s,"useParams")&&a.d(r,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(r,{useSearchParams:function(){return s.useSearchParams}})},4892:()=>{},7300:()=>{},752:()=>{},662:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[1629,5951,4725,9895,2992,7512,4778,8441,1517,7358],()=>r(6937)),_N_E=e.O()}]);