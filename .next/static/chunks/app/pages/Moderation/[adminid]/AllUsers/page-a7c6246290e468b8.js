(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4003],{8359:(e,s,a)=>{Promise.resolve().then(a.bind(a,8218))},929:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(5155);a(2115),a(4892);let t=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"loading-overlay",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Loading..."})]})})},4194:(e,s,a)=>{"use strict";a.d(s,{db:()=>l,j2:()=>o});var r=a(9904),t=a(7058),n=a(4565);let i=(0,r.Wp)({apiKey:"AIzaSyBJ_h8hsYSrF6n_aUHNcSM9Sxarjy9vdis",authDomain:"homelibrary-3eb02.firebaseapp.com",projectId:"homelibrary-3eb02",storageBucket:"homelibrary-3eb02.firebasestorage.app",messagingSenderId:"193740511363",appId:"1:193740511363:web:1aa41e575c0e79ae3be3b6"}),o=(0,n.xI)(i),l=(0,t.aU)(i)},8218:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var r=a(5155),t=a(2115),n=a(7058),i=a(4194);a(7586);var o=a(3189),l=a(151);a(6834);let d=e=>{let{name:s,profileImage:a,moderationStatus:t,onViewSeller:n,onSuspendSeller:i,onUnsuspendSeller:o}=e;return(0,r.jsxs)("div",{className:"userContainer",children:[(0,r.jsx)("img",{src:a,alt:"User Profile"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:s}),(0,r.jsx)("button",{className:"sellerbutton",onClick:n,children:"View Seller Page"})]}),(0,r.jsx)("div",{className:"buttons",children:(0,r.jsxs)("div",{className:"approvebuttons",children:["suspended"!==t&&(0,r.jsx)("button",{className:"wrong",onClick:i,children:"Suspend Seller"}),"suspended"===t&&(0,r.jsx)("button",{className:"right",onClick:o,children:"Unsuspend Seller"})]})})]})};var c=a(6046);let u=()=>{let[e,s]=(0,t.useState)([]),a=(0,c.useRouter)();(0,t.useEffect)(()=>{(async()=>{let e=(0,n.rJ)(i.db,"users");s((await (0,n.GG)(e)).docs.map(e=>({id:e.id,...e.data()})))})()},[]);let u=async e=>{try{let a=(0,n.H9)(i.db,"users",e);await (0,n.mZ)(a,{moderationStatus:"suspended"});let r=(0,n.rJ)(i.db,"books"),t=(await (0,n.GG)(r)).docs.filter(s=>s.data().uid===e).map(e=>(0,n.mZ)((0,n.H9)(i.db,"books",e.id),{moderationStatus:"rejected"}));await Promise.all(t),s(s=>s.map(s=>s.id===e?{...s,moderationStatus:"suspended"}:s)),console.log("User ".concat(e," suspended. All books rejected."))}catch(e){console.error("Error suspending user and rejecting books:",e)}},m=async e=>{try{let a=(0,n.H9)(i.db,"users",e);await (0,n.mZ)(a,{moderationStatus:"approved"});let r=(0,n.rJ)(i.db,"books"),t=(await (0,n.GG)(r)).docs.filter(s=>s.data().uid===e).map(e=>(0,n.mZ)((0,n.H9)(i.db,"books",e.id),{moderationStatus:"approved"}));await Promise.all(t),s(s=>s.map(s=>s.id===e?{...s,moderationStatus:"approved"}:s)),console.log("User ".concat(e," unsuspended. All books approved."))}catch(e){console.error("Error unsuspending user and approving books:",e)}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"turntothenextline",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{className:"maincontainer",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("div",{className:"tempcontainer",children:e.map(e=>(0,r.jsx)(d,{name:e.username||"Unknown User",profileImage:e.profilepicture||"/pp.png",moderationStatus:e.moderationStatus||"approved",onViewSeller:()=>a.push("/pages/seller/".concat(e.uid,"/SellerPage")),onSuspendSeller:()=>u(e.id),onUnsuspendSeller:()=>m(e.id)},e.id))})]})]})})}},151:(e,s,a)=>{"use strict";a.d(s,{A:()=>o});var r=a(5155),t=a(2115);a(752);var n=a(929),i=a(6046);let o=()=>{let[e,s]=(0,t.useState)(!1),a=(0,i.useRouter)(),[o,l]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=sessionStorage.getItem("adminid");e?l(e):a.push("/LoginPages/adminlogin")},[]);let d=e=>{o&&(s(!0),setTimeout(()=>{a.push("/pages/Moderation/".concat(o,"/").concat(e)),s(!1)},1500))};return(0,r.jsxs)(r.Fragment,{children:[e&&(0,r.jsx)(n.A,{}),(0,r.jsxs)("div",{className:"sidemenucontainer",children:[(0,r.jsxs)("button",{onClick:()=>d("NewListings"),children:[(0,r.jsx)("img",{src:"/dashhome.svg",alt:"Dashboard Icon"})," New Listings"]}),(0,r.jsxs)("button",{onClick:()=>d("AllListings"),children:[(0,r.jsx)("img",{src:"/dashadd.svg",alt:"Add Book Icon"})," All Listings"]}),(0,r.jsxs)("button",{onClick:()=>d("AllUsers"),children:[(0,r.jsx)("img",{src:"/dashview.svg",alt:"View Books Icon"})," View Users"]}),(0,r.jsxs)("button",{onClick:()=>d("AddModerator"),children:[(0,r.jsx)("img",{src:"/dashbuy.svg",alt:"Settings"})," Add Moderator"]}),(0,r.jsxs)("button",{onClick:()=>{sessionStorage.removeItem("adminid"),a.push("/pages/LoginPages/adminlogin")},children:[(0,r.jsx)("img",{src:"/dashout.svg",alt:"Logout Icon"})," Log Out"]})]})]})}},3189:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var r=a(5155),t=a(2115);a(662);var n=a(4194),i=a(7058),o=a(4565);let l=()=>{let[e,s]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let e=(0,o.hg)(n.j2,async e=>{if(e&&e.email){let a=(0,i.rJ)(n.db,"admins"),r=(0,i.P)(a,(0,i._M)("email","==",e.email)),t=await (0,i.GG)(r);t.empty||s(t.docs[0].data())}});return()=>e()},[]),(0,r.jsxs)("div",{className:"topmenucontainer",children:[(0,r.jsx)("img",{src:"/logo.png",className:"logotop",alt:"logo"}),(0,r.jsxs)("div",{className:"namecontainer",children:[(0,r.jsx)("div",{className:"profilePicture",children:(0,r.jsx)("img",{src:"/pp.jpg",alt:"profile"})}),(0,r.jsxs)("div",{className:"topmenunames",children:[(0,r.jsx)("h1",{children:(null==e?void 0:e.fullname)||"Loading..."}),(0,r.jsx)("p",{children:(null==e?void 0:e.role)||""})]})]})]})}},6046:(e,s,a)=>{"use strict";var r=a(6658);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},4892:()=>{},7586:()=>{},752:()=>{},662:()=>{},6834:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[835,5951,4725,1379,9895,2992,7512,4778,8441,1517,7358],()=>s(8359)),_N_E=e.O()}]);