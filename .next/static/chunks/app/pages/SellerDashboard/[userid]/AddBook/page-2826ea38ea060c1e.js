(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8451],{7680:(e,i,a)=>{Promise.resolve().then(a.bind(a,6345))},6098:(e,i,a)=>{"use strict";a.d(i,{Ve:()=>n,zi:()=>t}),a(5155),a(7690);let n="https://api.cloudinary.com/v1_1/dipztwslj/upload",t="bookimages"},4194:(e,i,a)=>{"use strict";a.d(i,{db:()=>o,j2:()=>l});var n=a(9904),t=a(7058),s=a(4565);let r=(0,n.Wp)({apiKey:"AIzaSyBJ_h8hsYSrF6n_aUHNcSM9Sxarjy9vdis",authDomain:"homelibrary-3eb02.firebaseapp.com",projectId:"homelibrary-3eb02",storageBucket:"homelibrary-3eb02.appspot.com",messagingSenderId:"193740511363",appId:"1:193740511363:web:1aa41e575c0e79ae3be3b6"}),l=(0,s.xI)(r),o=(0,t.aU)(r)},6345:(e,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>d});var n=a(5155),t=a(2115),s=a(4194),r=a(7058),l=a(4565),o=a(6098);a(7203);let d=()=>{let[e,i]=(0,t.useState)({book:"",author:"",description:"",condition:"",daysUsed:"",price:"",tags:"",location:"",category:"",isbnnumber:"",publisher:"",publishdate:"",pagescount:"",binding:"",uploadedImages:[]}),[a,d]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=(0,l.hg)(s.j2,e=>{e?d(e):window.location.href="/login"});return()=>e()},[]);let c=e=>{let{name:a,value:n}=e.target;i(e=>({...e,[a]:n}))},u=async n=>{if(n.preventDefault(),!a){alert("User not authenticated.");return}if(!e.book||!e.author||!e.description||!e.condition||!e.price||!e.location||!e.category){alert("Please fill in all required fields.");return}if(isNaN(Number(e.price))||0>=Number(e.price)){alert("Please enter a valid price.");return}try{let n=[];for(let i of e.uploadedImages){let e=new FormData;e.append("file",i),e.append("upload_preset",o.zi);let a=await fetch(o.Ve,{method:"POST",body:e}),t=await a.json();t.secure_url&&n.push(t.secure_url)}let t={bid:(0,r.H9)((0,r.rJ)(s.db,"books")).id,uid:a.uid,book:e.book,author:e.author,description:e.description,condition:e.condition,daysUsed:parseInt(e.daysUsed,10),price:e.price,tags:e.tags.split(",").map(e=>e.trim()),location:e.location,category:e.category,isbnnumber:e.isbnnumber||null,publisher:e.publisher||null,publishdate:e.publishdate||null,pagescount:e.pagescount||null,binding:e.binding||null,uploadedImages:n,createdAt:r.Dc.fromDate(new Date),moderationStatus:"pending"};await (0,r.gS)((0,r.rJ)(s.db,"books"),t),i({book:"",author:"",description:"",condition:"",daysUsed:"",price:"",tags:"",location:"",category:"",isbnnumber:"",publisher:"",publishdate:"",pagescount:"",binding:"",uploadedImages:[]}),alert("Book added successfully! It is now awaiting moderation.")}catch(e){console.error("Error adding book: ",e),alert("Failed to add book. Please try again.")}};return(0,n.jsx)("div",{className:"belowdash",children:(0,n.jsx)("div",{className:"addbook-tempconta",children:(0,n.jsxs)("form",{onSubmit:u,children:[(0,n.jsxs)("div",{className:"imagecontainerr",children:[(0,n.jsx)("label",{htmlFor:"upload",className:"uploadimg",children:(0,n.jsx)("div",{children:"\uD83D\uDCE4 Upload Images (Max 6 Images)"})}),(0,n.jsx)("input",{id:"upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{let a=e.target.files?Array.from(e.target.files):[];if(a.length>6){alert("You can upload a maximum of 6 images.");return}i(e=>({...e,uploadedImages:a}))},hidden:!0}),(0,n.jsx)("div",{className:"image-preview",children:e.uploadedImages.map((e,i)=>{let a=URL.createObjectURL(e);return(0,n.jsx)("img",{src:a,alt:"Preview ".concat(i),onLoad:()=>URL.revokeObjectURL(a),style:{maxWidth:"100px",margin:"5px"}},i)})})]}),(0,n.jsxs)("div",{className:"form-fields",children:[(0,n.jsxs)("div",{className:"textform",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Book Name"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"book",value:e.book,onChange:c,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Author"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"author",value:e.author,onChange:c,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Book Condition"}),(0,n.jsx)("br",{}),(0,n.jsx)("textarea",{name:"condition",value:e.condition,onChange:c,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Book Description"}),(0,n.jsx)("br",{}),(0,n.jsx)("textarea",{name:"description",value:e.description,onChange:c,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Days Used"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"number",name:"daysUsed",value:e.daysUsed,onChange:c,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Price"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"price",value:e.price,onChange:c,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Tags(Max: 5 Tags Separated by Commas)"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"tags",value:e.tags,onChange:c,required:!0})]})]}),(0,n.jsxs)("div",{className:"additional-info",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Location"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"location",value:e.location,onChange:c,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Category"}),(0,n.jsx)("br",{}),(0,n.jsxs)("select",{name:"category",value:e.category,onChange:c,required:!0,children:[(0,n.jsx)("option",{value:"",children:"SDelect a Category"}),(0,n.jsx)("option",{value:"Fiction",children:"Fiction"}),(0,n.jsx)("option",{value:"Non-Fiction",children:"Non-Fiction"}),(0,n.jsx)("option",{value:"Science",children:"Science"}),(0,n.jsx)("option",{value:"Mathematics",children:"Mathematics"}),(0,n.jsx)("option",{value:"Technology",children:"Technology"}),(0,n.jsx)("option",{value:"Literature",children:"Literature"}),(0,n.jsx)("option",{value:"Biography",children:"Biography"}),(0,n.jsx)("option",{value:"Philosophy",children:"Philosophy"}),(0,n.jsx)("option",{value:"History",children:"History"}),(0,n.jsx)("option",{value:"Art",children:"Art"}),(0,n.jsx)("option",{value:"Psychology",children:"Psychology"}),(0,n.jsx)("option",{value:"Self-Help",children:"Self-Help"}),(0,n.jsx)("option",{value:"Travel",children:"Travel"}),(0,n.jsx)("option",{value:"Poetry",children:"Poetry"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"ISBN Number"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"isbnnumber",value:e.isbnnumber,onChange:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Publisher"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"publisher",value:e.publisher,onChange:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Published Date"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"publishdate",value:e.publishdate,onChange:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Pages"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"pagescount",value:e.pagescount,onChange:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Binding"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"text",name:"binding",value:e.binding,onChange:c})]}),(0,n.jsx)("div",{className:"submitbutton",children:(0,n.jsx)("button",{type:"submit",children:"Submit"})})]})]})]})})})}},7203:()=>{}},e=>{var i=i=>e(e.s=i);e.O(0,[1810,9895,2992,7512,4778,7970,7690,8441,1517,7358],()=>i(7680)),_N_E=e.O()}]);