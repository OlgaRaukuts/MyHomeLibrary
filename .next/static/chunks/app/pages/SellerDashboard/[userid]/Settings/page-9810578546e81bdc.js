(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7786],{9221:(e,a,t)=>{Promise.resolve().then(t.bind(t,9860))},6098:(e,a,t)=>{"use strict";t.d(a,{Ve:()=>l,zi:()=>r}),t(5155),t(7690);let l="https://api.cloudinary.com/v1_1/dipztwslj/upload",r="bookimages"},4194:(e,a,t)=>{"use strict";t.d(a,{db:()=>s,j2:()=>o});var l=t(9904),r=t(7058),i=t(4565);let n=(0,l.Wp)({apiKey:"AIzaSyBJ_h8hsYSrF6n_aUHNcSM9Sxarjy9vdis",authDomain:"homelibrary-3eb02.firebaseapp.com",projectId:"homelibrary-3eb02",storageBucket:"homelibrary-3eb02.firebasestorage.app",messagingSenderId:"193740511363",appId:"1:193740511363:web:1aa41e575c0e79ae3be3b6"}),o=(0,i.xI)(n),s=(0,r.aU)(n)},9860:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var l=t(5155),r=t(2115),i=t(4194),n=t(7058),o=t(4565),s=t(6098);t(9329);let c={profilepicture:"",fname:"",lname:"",email:"",joindata:"",contact:"",location:"",username:"",aboutme:""},u=()=>{let[e,a]=(0,r.useState)(null),[t,u]=(0,r.useState)(c);(0,r.useEffect)(()=>{let e=(0,o.hg)(i.j2,async e=>{if(e){a(e);try{let a=await (0,n.x7)((0,n.H9)(i.db,"users",e.uid));if(a.exists()){let e=a.data();u({profilepicture:e.profilepicture||"",fname:e.fname||"",lname:e.lname||"",email:e.email||"",joindata:e.joindata||"",contact:e.contact||"",location:e.location||"",username:e.username||"",aboutme:e.aboutme||""})}}catch(e){console.error("Error fetching profile:",e)}}else window.location.href="/login"});return()=>e()},[]);let d=async()=>{if(e&&e.email&&window.confirm("Are you sure you want to delete your profile? This action cannot be undone."))try{var a;let t=prompt("Please enter your password to confirm deletion:");if(!t)return alert("Password is required to delete your account.");let l=o.IX.credential(e.email,t);await (0,o.kZ)(e,l),await (0,n.kd)((0,n.H9)(i.db,"users",e.uid)),await (null===(a=i.j2.currentUser)||void 0===a?void 0:a.delete()),await i.j2.signOut(),alert("Profile deleted successfully!"),window.location.href="/"}catch(e){console.error("Error deleting profile:",e),alert("Failed to delete profile. Please check your credentials and try again.")}},m=e=>{let{name:a,value:t}=e.target;u(e=>({...e,[a]:t}))},p=async e=>{if(!e.target.files)return;let a=e.target.files[0],t=new FormData;t.append("file",a),t.append("upload_preset",s.zi);try{let e=await fetch(s.Ve,{method:"POST",body:t}),a=await e.json();a.secure_url&&u(e=>({...e,profilepicture:a.secure_url}))}catch(e){console.error("Image upload failed:",e)}},f=async a=>{if(a.preventDefault(),e)try{await (0,n.mZ)((0,n.H9)(i.db,"users",e.uid),t),alert("Profile updated successfully!")}catch(e){console.error("Error updating profile:",e),alert("Failed to update profile.")}};return(0,l.jsx)("div",{className:"belowdash",children:(0,l.jsx)("div",{className:"tempconta",children:(0,l.jsxs)("form",{onSubmit:f,children:[(0,l.jsxs)("div",{className:"imagecontainer",children:[(0,l.jsx)("label",{htmlFor:"upload",className:"uploadimg",children:"\uD83D\uDCE4 Upload Profile Picture"}),(0,l.jsx)("input",{id:"upload",type:"file",accept:"image/*",onChange:p,hidden:!0}),t.profilepicture&&(0,l.jsx)("img",{src:t.profilepicture,alt:"Profile",style:{maxWidth:"100px"}})]}),(0,l.jsxs)("div",{className:"form-fields-settings",children:[(0,l.jsx)("label",{children:"First Name"}),(0,l.jsx)("input",{type:"text",name:"fname",value:t.fname,onChange:m,required:!0}),(0,l.jsx)("label",{children:"Last Name"}),(0,l.jsx)("input",{type:"text",name:"lname",value:t.lname,onChange:m,required:!0}),(0,l.jsx)("label",{children:"Email"}),(0,l.jsx)("input",{type:"email",name:"email",value:t.email,readOnly:!0}),(0,l.jsx)("label",{children:"Join Date"}),(0,l.jsx)("input",{type:"text",name:"joindata",value:t.joindata,readOnly:!0}),(0,l.jsx)("label",{children:"Contact"}),(0,l.jsx)("input",{type:"text",name:"contact",value:t.contact,onChange:m,required:!0}),(0,l.jsx)("label",{children:"Location"}),(0,l.jsx)("input",{type:"text",name:"location",value:t.location,onChange:m,required:!0}),(0,l.jsx)("label",{children:"Username"}),(0,l.jsx)("input",{type:"text",name:"username",value:t.username,onChange:m,required:!0}),(0,l.jsx)("label",{children:"About Me"}),(0,l.jsx)("textarea",{name:"aboutme",value:t.aboutme,onChange:m}),(0,l.jsx)("button",{type:"submit",className:"submit-btn",children:"Update Profile"}),(0,l.jsx)("button",{type:"button",className:"seller-btn",onClick:()=>window.location.href="/pages/seller/".concat(null==e?void 0:e.uid,"/SellerPage"),children:"View Seller Page"}),(0,l.jsx)("button",{type:"button",className:"delete-btn",onClick:d,children:"Delete Profile"})]})]})})})}},9329:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[6890,9895,2992,7512,4778,7970,7690,8441,1517,7358],()=>a(9221)),_N_E=e.O()}]);