(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7597],{6058:(e,t,a)=>{Promise.resolve().then(a.bind(a,9976))},4194:(e,t,a)=>{"use strict";a.d(t,{db:()=>o,j2:()=>r});var s=a(9904),l=a(7058),n=a(4565);let i=(0,s.Wp)({apiKey:"AIzaSyBJ_h8hsYSrF6n_aUHNcSM9Sxarjy9vdis",authDomain:"homelibrary-3eb02.firebaseapp.com",projectId:"homelibrary-3eb02",storageBucket:"homelibrary-3eb02.appspot.com",messagingSenderId:"193740511363",appId:"1:193740511363:web:1aa41e575c0e79ae3be3b6"}),r=(0,n.xI)(i),o=(0,l.aU)(i)},9976:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),l=a(2115);a(8228),a(2613);let n=e=>{let{lclicks:t,response:a,listings:l,rating:n}=e;return(0,s.jsxs)("div",{className:"dashtopcontainer",children:[(0,s.jsxs)("div",{className:"dashelement",children:[(0,s.jsx)("div",{className:"numbercircle",children:(0,s.jsxs)("h3",{children:[a,"%"]})}),(0,s.jsx)("h2",{children:"RESPONSE RATE"})]}),(0,s.jsxs)("div",{className:"dashelement",children:[(0,s.jsx)("div",{className:"numbercircle",children:(0,s.jsx)("h3",{children:l})}),(0,s.jsx)("h2",{children:"TOTAL LISTINGS"})]}),(0,s.jsxs)("div",{className:"dashelement",children:[(0,s.jsx)("div",{className:"numbercircle",children:(0,s.jsx)("h3",{children:n})}),(0,s.jsx)("h2",{children:"SELLER RATING"})]})]})};a(9721);var i=a(5781),r=a(1710);i.t1.register(i.PP,i.kc,i.FN,i.No,i.hE,i.m_,i.s$);let o=e=>{let{data:t}=e;if(!t||0===t.length)return(0,s.jsx)("p",{style:{padding:"1rem"},children:"No data to display this month."});let a={labels:t.map(e=>e.date),datasets:[{label:"Books Added",data:t.map(e=>e.count),borderColor:"#4e73df",backgroundColor:"rgba(78, 115, 223, 0.1)",tension:.4,fill:!0,pointRadius:3,pointBackgroundColor:"#4e73df",pointBorderColor:"#4e73df"}]};return(0,s.jsx)("div",{className:"chartcontainer",children:(0,s.jsx)(r.N1,{data:a,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Books Added Per Day (This Month)",padding:{top:10,bottom:10}}},scales:{x:{title:{display:!0,text:"Date"},ticks:{maxRotation:90,minRotation:45}},y:{title:{display:!0,text:"Books Added"},beginAtZero:!0,ticks:{stepSize:1}}}}})})};a(7965);let c=e=>{let{image:t,name:a,linkTo:l}=e;return(0,s.jsx)("a",{href:l,className:"contactCardLink",children:(0,s.jsxs)("div",{className:"contactContainer",children:[(0,s.jsx)("img",{src:t,alt:a,onError:e=>{e.currentTarget.src="/default-profile.png"}}),(0,s.jsx)("div",{className:"contactName",children:a})]})})};a(4829);let d=()=>{let[e,t]=(0,l.useState)(0),[a,n]=(0,l.useState)(0),[i,r]=(0,l.useState)(0),[o,c]=(0,l.useState)("Excellent"),[d,h]=(0,l.useState)("Excellent"),[u,x]=(0,l.useState)("Intact"),[v,j]=(0,l.useState)("None"),[m,p]=(0,l.useState)(null);return(0,s.jsxs)("div",{className:"allinput",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Original Price: "}),(0,s.jsx)("input",{type:"number",value:e,onChange:e=>t(Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Days Used: "}),(0,s.jsx)("input",{type:"number",value:a,onChange:e=>n(Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Pages Removed: "}),(0,s.jsx)("input",{type:"number",value:i,onChange:e=>r(Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Cover Condition: "}),(0,s.jsxs)("select",{value:o,onChange:e=>c(e.target.value),children:[(0,s.jsx)("option",{value:"Excellent",children:"Excellent"}),(0,s.jsx)("option",{value:"Good",children:"Good"}),(0,s.jsx)("option",{value:"Fair",children:"Fair"}),(0,s.jsx)("option",{value:"Poor",children:"Poor"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Appearance Condition: "}),(0,s.jsxs)("select",{value:d,onChange:e=>h(e.target.value),children:[(0,s.jsx)("option",{value:"Excellent",children:"Excellent"}),(0,s.jsx)("option",{value:"Good",children:"Good"}),(0,s.jsx)("option",{value:"Fair",children:"Fair"}),(0,s.jsx)("option",{value:"Poor",children:"Poor"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Binding Condition: "}),(0,s.jsxs)("select",{value:u,onChange:e=>x(e.target.value),children:[(0,s.jsx)("option",{value:"Intact",children:"Intact"}),(0,s.jsx)("option",{value:"Loose",children:"Loose"}),(0,s.jsx)("option",{value:"Damaged",children:"Damaged"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Highlighting: "}),(0,s.jsxs)("select",{value:v,onChange:e=>j(e.target.value),children:[(0,s.jsx)("option",{value:"None",children:"None"}),(0,s.jsx)("option",{value:"Minor",children:"Minor"}),(0,s.jsx)("option",{value:"Significant",children:"Significant"})]})]}),(0,s.jsx)("button",{className:"buttoncal",onClick:()=>{var t,s,l,n;let r=0;r=a<=30?.05:a<=90?.15:.3;let c=.01*i,h={cover:null!==(t=({Excellent:0,Good:.1,Fair:.25,Poor:.5})[o])&&void 0!==t?t:0,look:null!==(s=({Excellent:0,Good:.1,Fair:.25,Poor:.5})[d])&&void 0!==s?s:0,binding:null!==(l=({Intact:0,Loose:.15,Damaged:.3})[u])&&void 0!==l?l:0},x=null!==(n=({None:0,Minor:.1,Significant:.25})[v])&&void 0!==n?n:0;p(Math.round(100*(e*(1-r)*(1-c)*(1-h.cover)*(1-h.look)*(1-h.binding)*(1-x)))/100)},children:"Calculate"}),null!==m&&(0,s.jsx)("div",{children:(0,s.jsxs)("h2",{children:["Estimated Worth: $",m]})})]})};a(2255);let h=e=>{let{rating:t,text:a,reviewer:l,onDelete:n}=e;return(0,s.jsxs)("div",{className:"reviewscontainerdash",children:[(0,s.jsxs)("div",{className:"reviewtextcontainer",children:[(0,s.jsxs)("div",{className:"starthing",children:[(0,s.jsx)("p",{className:"starcount",children:t}),(0,s.jsx)("img",{src:"/star.svg"})]}),(0,s.jsx)("p",{className:"reviewdash",children:a}),(0,s.jsx)("p",{className:"reviewer",children:l})]}),(0,s.jsx)("div",{className:"delbuttondash",children:(0,s.jsx)("button",{onClick:n,children:"Delete Review"})})]})};var u=a(7058),x=a(4194),v=a(1455),j=a.n(v);function m(e){let{params:t}=e,{userid:a}=(0,l.use)(t),[i,r]=(0,l.useState)(0),[v,m]=(0,l.useState)(0),[p,g]=(0,l.useState)([]),[b,N]=(0,l.useState)([]),[f,y]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=localStorage.getItem("refreshCount");if(e){if(3>parseInt(e)){let t=parseInt(e)+1;localStorage.setItem("refreshCount",t.toString()),window.location.reload()}}else localStorage.setItem("refreshCount","1")},[]),(0,l.useEffect)(()=>{(async()=>{try{let e=(0,u.P)((0,u.rJ)(x.db,"books"),(0,u._M)("uid","==",a)),t=await (0,u.GG)(e);r(t.size);let s=(0,u.P)((0,u.rJ)(x.db,"reviews"),(0,u._M)("sellerId","==",a)),l=await (0,u.GG)(s),n=0,i=0,o=[];l.forEach(e=>{let t=e.data();"number"==typeof t.stars&&(n+=t.stars,i++),o.push({id:e.id,rating:t.stars,text:t.review,reviewer:t.userName||"Anonymous"})});let c=i>0?n/i:0;m(parseFloat(c.toFixed(2))),y(o);let d=j()().startOf("month").toDate(),h=j()().endOf("month").toDate(),v={};t.forEach(e=>{let t=e.data().createdAt;if(t&&"function"==typeof t.toDate){let e=t.toDate();if(e>=d&&e<=h){let t=j()(e).format("YYYY-MM-DD");v[t]=(v[t]||0)+1}}});let p=j()().daysInMonth(),b=Array.from({length:p},(e,t)=>{let a=j()().startOf("month").add(t,"day").format("YYYY-MM-DD");return{date:a,count:v[a]||0}});g(b);let f=await (0,u.GG)((0,u.rJ)(x.db,"chats")),S=new Map;for(let e of f.docs){let t=e.id;if(!t.endsWith("_".concat(a)))continue;let s=t.split("_")[0];if(!S.has(s))try{let e=await (0,u.x7)((0,u.H9)(x.db,"users",s));if(!e.exists())continue;let a=e.data(),l="".concat((null==a?void 0:a.fname)||""," ").concat((null==a?void 0:a.lname)||"").trim(),n=(null==a?void 0:a.profilepicture)||"/default-profile.png";S.set(s,{name:l||"Unknown Buyer",image:n,chatId:t})}catch(e){console.error("Error loading buyer (".concat(s,")"),e)}}N(Array.from(S.values()))}catch(e){console.error("Error loading dashboard:",e)}})()},[a]);let S=async e=>{try{await (0,u.kd)((0,u.H9)(x.db,"reviews",e)),y(t=>t.filter(t=>t.id!==e)),console.log("Deleted review:",e)}catch(e){console.error("Failed to delete review:",e)}};return(0,s.jsxs)("div",{className:"tempconta",children:[(0,s.jsx)(n,{lclicks:92,response:2,listings:i,rating:v}),(0,s.jsxs)("div",{className:"containertwo",children:[(0,s.jsx)(o,{data:p}),(0,s.jsxs)("div",{className:"Contacts",children:[(0,s.jsx)("h3",{children:"Latest Contacts"}),(0,s.jsx)("div",{className:"contacts-scrollable",children:0===b.length?(0,s.jsx)("p",{children:"No contacts yet."}):b.map((e,t)=>(0,s.jsx)(c,{name:e.name,image:e.image,linkTo:"/pages/SellerDashboard/".concat(a,"/Message?chatId=").concat(e.chatId)},t))})]})]}),(0,s.jsxs)("div",{className:"containerthree",children:[(0,s.jsxs)("div",{className:"Listings",children:[(0,s.jsx)("h3",{children:"Book Worth Calculator"}),(0,s.jsx)(d,{})]}),(0,s.jsxs)("div",{className:"Reviews",children:[(0,s.jsx)("h3",{children:"Reviews"}),(0,s.jsx)("div",{className:"reviews-scrollable",children:0===f.length?(0,s.jsx)("p",{children:"No reviews yet."}):f.map(e=>(0,s.jsx)(h,{rating:e.rating,text:e.text,reviewer:e.reviewer,onDelete:()=>S(e.id)},e.id))})]})]})]})}},8228:()=>{},4829:()=>{},9721:()=>{},7965:()=>{},2613:()=>{},2255:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[7050,9895,2992,5647,7512,4778,273,8441,1517,7358],()=>t(6058)),_N_E=e.O()}]);